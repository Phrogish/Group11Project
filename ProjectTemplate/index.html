<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Employee Login</title>

    <!-- jQuery (REQUIRED) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script type="text/javascript">

        // TEST DATABASE CONNECTION
        function TestButtonHandler() {
            $.ajax({
                type: "POST",
                url: "ProjectServices.asmx/TestConnection",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    alert(msg.d);
                },
                error: function (xhr) {
                    console.log(xhr);
                    alert("Cannot reach webservice (" + xhr.status + "): " + xhr.responseText);
                }
            });
        }

        // LOGIN FUNCTION
        function login() {
            $("#errorMessage").text("");

            var parameters = JSON.stringify({
                email: $("#email").val(),
                password: $("#password").val()
            });

            $.ajax({
                type: "POST",
                url: "ProjectServices.asmx/Login",
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (msg) {
                    var result = msg.d;

                    if (result.success) {
                        window.location.href = "home.html";
                    } else {
                        $("#errorMessage").text(result.message);
                    }
                },

                error: function (xhr) {
                    console.log(xhr);
                    $("#errorMessage").text(
                        "Server error (" + xhr.status + "): " + xhr.responseText
                    );
                }
            });
        }

    </script>
</head>

<body>

    <button onclick="TestButtonHandler()">Click here to test connection!</button>
    <hr>

    <h2>Employee Login</h2>

    <input id="email" type="text" placeholder="Email" />
    <br><br>

    <input id="password" type="password" placeholder="Password" />
    <br><br>

    <button onclick="login()">Login</button>

    <div id="errorMessage" style="color:red; margin-top:10px;"></div>

</body>
</html>
